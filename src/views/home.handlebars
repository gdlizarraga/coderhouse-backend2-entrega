<div class="container py-2">
  {{#if user}}
    <!-- Bienvenida para usuarios autenticados -->
    <div class="row">
      <div class="col-12">
        <div class="jumbotron bg-warning text-white p-3 rounded mb-4">
          <h4 class="display-7">
            ¡Bienvenido,
            {{user.first_name}}
            {{user.last_name}}!
          </h4>
        </div>
      </div>
    </div>
  {{/if}}

  <!-- Sección de Productos (solo para usuarios con role "user" o deslogueados) -->
  {{#if user}}
    {{#if (eq user.role "user")}}
      <div class="row mb-5">
        <div class="col-12">
          <h2 class="text-center mb-4">
            <i class="bi bi-box-seam me-2"></i>
            Nuestros Productos
          </h2>

          <!-- Loading state -->
          <div id="productsLoading" class="text-center py-5">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Cargando productos...</span>
            </div>
            <p class="mt-3 text-muted">Cargando productos...</p>
          </div>

          <!-- Empty state -->
          <div id="productsEmpty" class="text-center py-5 d-none">
            <i class="bi bi-inbox" style="font-size: 3rem; color: #6c757d;"></i>
            <p class="mt-3 text-muted">No hay productos disponibles</p>
          </div>

          <!-- Products grid -->
          <div id="productsGrid" class="row g-4 d-none">
            <!-- Los productos se cargarán aquí dinámicamente -->
          </div>
        </div>
      </div>
    {{/if}}
  {{else}}
    <!-- Productos para usuarios no autenticados -->
    <div class="row mb-5">
      <div class="col-12">
        <h2 class="text-center mb-4">
          <i class="bi bi-box-seam me-2"></i>
          Nuestros Productos
        </h2>

        <!-- Loading state -->
        <div id="productsLoading" class="text-center py-5">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando productos...</span>
          </div>
          <p class="mt-3 text-muted">Cargando productos...</p>
        </div>

        <!-- Empty state -->
        <div id="productsEmpty" class="text-center py-5 d-none">
          <i class="bi bi-inbox" style="font-size: 3rem; color: #6c757d;"></i>
          <p class="mt-3 text-muted">No hay productos disponibles</p>
        </div>

        <!-- Products grid -->
        <div id="productsGrid" class="row g-4 d-none">
          <!-- Los productos se cargarán aquí dinámicamente -->
        </div>
      </div>
    </div>
  {{/if}}

  {{#if user}}
    <!-- Cards informativas -->
    <div class="row g-4">
      <div class="col-md-4">
        <div class="card h-100">
          <div class="card-body text-center">
            <div class="mb-3">
              <i
                class="bi bi-person-circle text-primary"
                style="font-size: 3rem;"
              ></i>
            </div>
            <h5 class="card-title">Mi Perfil</h5>
            <p class="card-text text-muted">
              Ve y edita tu información personal
            </p>
            <a href="/profile" class="btn btn-outline-primary">
              <i class="bi bi-person me-1"></i>
              Ver Perfil
            </a>
          </div>
        </div>
      </div>

      {{#if (eq user.role "admin")}}
        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body text-center">
              <div class="mb-3">
                <i
                  class="bi bi-people text-success"
                  style="font-size: 3rem;"
                ></i>
              </div>
              <h5 class="card-title">Usuarios</h5>
              <p class="card-text text-muted">
                Administra todos los usuarios del sistema
              </p>
              <a href="/users" class="btn btn-success">
                <i class="bi bi-people me-1"></i>
                Ir a Usuarios
              </a>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body text-center">
              <div class="mb-3">
                <i
                  class="bi bi-box-seam text-info"
                  style="font-size: 3rem;"
                ></i>
              </div>
              <h5 class="card-title">Productos</h5>
              <p class="card-text text-muted">
                Administra el catálogo de productos
              </p>
              <a href="/products" class="btn btn-info">
                <i class="bi bi-box-seam me-1"></i>
                Ir a Productos
              </a>
            </div>
          </div>
        </div>
      {{/if}}

      <div class="col-md-4">
        <div class="card h-100">
          <div class="card-body text-center">
            <div class="mb-3">
              <i class="bi bi-gear text-warning" style="font-size: 3rem;"></i>
            </div>
            <h5 class="card-title">Configuración</h5>
            <p class="card-text text-muted">
              Cambia tu contraseña y ajustes
            </p>
            <a href="/settings" class="btn btn-outline-warning">
              <i class="bi bi-gear me-1"></i>
              Configuración
            </a>
          </div>
        </div>
      </div>
    </div>
  {{else}}
    <!-- Landing page para usuarios no autenticados -->
    <div class="row">
      <div class="col-12">
        <div
          class="jumbotron text-center p-5 mb-5"
          style="background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #667eea 100%); color: white; border-radius: 15px; box-shadow: 0 8px 32px rgba(0,0,0,0.1);"
        >
          <h1
            class="display-3 fw-bold mb-4"
            style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3); color: #ffffff;"
          >
            <i class="bi bi-shield-check me-3"></i>
            Sistema de Usuarios
          </h1>
          <p
            class="lead fs-4 mb-4"
            style="text-shadow: 1px 1px 3px rgba(0,0,0,0.2); color: #f8f9fa; font-weight: 500;"
          >
            Plataforma segura de gestión y autenticación de usuarios
          </p>
          <p
            class="fs-5 mb-5"
            style="text-shadow: 1px 1px 3px rgba(0,0,0,0.2); color: #e9ecef; font-weight: 400;"
          >
            Desarrollado con Node.js, Express, MongoDB y JWT
          </p>
          <div class="d-flex gap-3 justify-content-center flex-wrap">
            <a
              href="/login"
              class="btn btn-light btn-lg px-4 shadow"
              style="background-color: #ffffff; color: #1e3c72; border: 2px solid #ffffff; font-weight: 600;"
            >
              <i class="bi bi-box-arrow-in-right me-2"></i>
              Iniciar Sesión
            </a>
            <a
              href="/register"
              class="btn btn-lg px-4 shadow"
              style="background-color: transparent; color: #ffffff; border: 2px solid #ffffff; font-weight: 600;"
            >
              <i class="bi bi-person-plus me-2"></i>
              Crear Cuenta
            </a>
            <a
              href="https://github.com/gdlizarraga/coderhouse-backend2-entrega/blob/main/README.md"
              class="btn btn-lg px-4 shadow"
              style="background-color: transparent; color: #ffffff; border: 2px solid #ffffff; font-weight: 600;"
              target="_blank"
            >
              <i class="bi bi-book me-2"></i>
              README Sistema (en GIT)
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Features -->
    <div class="row g-4 mb-5">
      <div class="col-md-4">
        <div class="card h-100 text-center">
          <div class="card-body">
            <div class="mb-3">
              <i
                class="bi bi-shield-lock text-primary"
                style="font-size: 3rem;"
              ></i>
            </div>
            <h5 class="card-title">Seguridad Avanzada</h5>
            <p class="card-text">
              Autenticación JWT y encriptación bcrypt para máxima seguridad
            </p>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card h-100 text-center">
          <div class="card-body">
            <div class="mb-3">
              <i class="bi bi-people text-success" style="font-size: 3rem;"></i>
            </div>
            <h5 class="card-title">Gestión de Roles</h5>
            <p class="card-text">
              Sistema completo de roles y permisos para diferentes tipos de
              usuarios
            </p>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card h-100 text-center">
          <div class="card-body">
            <div class="mb-3">
              <i class="bi bi-gear text-warning" style="font-size: 3rem;"></i>
            </div>
            <h5 class="card-title">CRUD Completo</h5>
            <p class="card-text">
              Operaciones completas de creación, lectura, actualización y
              eliminación
            </p>
          </div>
        </div>
      </div>
    </div>
  {{/if}}
</div>

<script src="/js/home.js"></script>