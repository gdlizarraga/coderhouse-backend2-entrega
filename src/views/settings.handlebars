{{#contentFor "pageScripts"}}
  <script src="/js/settings.js"></script>
{{/contentFor}}

<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3">
          <i class="fas fa-cog me-2"></i>
          Configuración
        </h1>
      </div>
    </div>
  </div>

  <div class="row">
    <!-- Configuración de Cuenta -->
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">
            <i class="fas fa-user-cog me-2"></i>
            Configuración de Cuenta
          </h5>
        </div>
        <div class="card-body">
          <div class="row mb-3">
            <div class="col-sm-4">
              <strong>Email:</strong>
            </div>
            <div class="col-sm-8">
              {{user.email}}
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-sm-4">
              <strong>Nombre:</strong>
            </div>
            <div class="col-sm-8">
              {{user.first_name}}
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-sm-4">
              <strong>Apellido:</strong>
            </div>
            <div class="col-sm-8">
              {{user.last_name}}
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-sm-4">
              <strong>Edad:</strong>
            </div>
            <div class="col-sm-8">
              {{user.age}}
              años
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-sm-4">
              <strong>Rol:</strong>
            </div>
            <div class="col-sm-8">
              <span class="badge bg-primary">{{user.role}}</span>
            </div>
          </div>
          <div class="d-flex gap-2">
            <a href="/profile" class="btn btn-primary">
              <i class="fas fa-edit me-1"></i>
              Editar Perfil
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Configuración de Seguridad -->
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">
            <i class="fas fa-shield-alt me-2"></i>
            Seguridad
          </h5>
        </div>
        <div class="card-body">
          <div class="mb-3">
            <h6>Cambiar Contraseña</h6>
            <p class="text-muted small">
              Actualiza tu contraseña regularmente para mantener tu cuenta
              segura.
            </p>
            <button
              type="button"
              class="btn btn-warning"
              data-bs-toggle="modal"
              data-bs-target="#changePasswordModal"
            >
              <i class="fas fa-key me-1"></i>
              Cambiar Contraseña
            </button>
          </div>
          <div class="mb-3">
            <h6>Información de Sesión</h6>
            <p class="text-muted small">
              Fecha de último acceso:
              {{formatDate user.last_connection}}
            </p>
            <button
              type="button"
              class="btn btn-outline-danger"
              onclick="logoutEverywhere()"
            >
              <i class="fas fa-sign-out-alt me-1"></i>
              Cerrar Todas las Sesiones
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <!-- Configuración de Notificaciones -->
    <div class="col-12 mb-4">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">
            <i class="fas fa-bell me-2"></i>
            Notificaciones
          </h5>
        </div>
        <div class="card-body">
          <div class="form-check form-switch mb-3">
            <input
              class="form-check-input"
              type="checkbox"
              id="emailNotifications"
              checked
            />
            <label class="form-check-label" for="emailNotifications">
              Notificaciones por Email
            </label>
          </div>
          <div class="form-check form-switch mb-3">
            <input
              class="form-check-input"
              type="checkbox"
              id="securityAlerts"
              checked
            />
            <label class="form-check-label" for="securityAlerts">
              Alertas de Seguridad
            </label>
          </div>
          <div class="form-check form-switch mb-3">
            <input
              class="form-check-input"
              type="checkbox"
              id="systemUpdates"
            />
            <label class="form-check-label" for="systemUpdates">
              Actualizaciones del Sistema
            </label>
          </div>
          <button
            type="button"
            class="btn btn-success"
            onclick="saveNotificationSettings()"
          >
            <i class="fas fa-save me-1"></i>
            Guardar Configuración
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal para Cambiar Contraseña -->
<div
  class="modal fade"
  id="changePasswordModal"
  tabindex="-1"
  aria-labelledby="changePasswordModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="changePasswordModalLabel">
          <i class="fas fa-key me-2"></i>
          Cambiar Contraseña
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <form id="changePasswordForm">
        <div class="modal-body">
          <div class="mb-3">
            <label for="currentPassword" class="form-label">Contraseña Actual</label>
            <input
              type="password"
              class="form-control"
              id="currentPassword"
              name="currentPassword"
              required
            />
          </div>
          <div class="mb-3">
            <label for="newPassword" class="form-label">Nueva Contraseña</label>
            <input
              type="password"
              class="form-control"
              id="newPassword"
              name="newPassword"
              required
              minlength="6"
            />
          </div>
          <div class="mb-3">
            <label for="confirmPassword" class="form-label">Confirmar Nueva
              Contraseña</label>
            <input
              type="password"
              class="form-control"
              id="confirmPassword"
              name="confirmPassword"
              required
              minlength="6"
            />
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >Cancelar</button>
          <button type="submit" class="btn btn-warning">
            <i class="fas fa-key me-1"></i>
            Cambiar Contraseña
          </button>
        </div>
      </form>
    </div>
  </div>
</div>